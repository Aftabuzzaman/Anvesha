<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
            }

            td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
            }

            tr:nth-child(even) {
            background-color: #dddddd;
        }
    </style>
</head>
<body>
    <form action="" method="post">
        <div>
        <label for="">Class:</label>
            <input type="text" name="" id=""><br><br>
        </div>
        <fieldset>
            <legend for="">Filters</legend>
            <div id='filtersSection'>
                <label for="">Filter 1:</label>
                <input type="text" name="filter_1" id="filter_1"> <br><br>
            </div>
            <input type="button" value="Add filter" onclick="addFilter()"><br><br>
        </fieldset>
        
    </form>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
<script>
        function makeSPARQLQuery(endpointUrl, sparqlQuery, doneCallback) {
            var settings = {
                headers: { Accept: 'application/sparql-results+json' },
                data: { query: sparqlQuery }
            };
            return $.ajax(endpointUrl, settings).then(doneCallback);
        }
        function performQuery(){
            var subject = $('#subjectOptions').val();
            var endpointUrl = 'https://query.wikidata.org/sparql',
            sparqlQuery = `
            SELECT ?gen ?genLabel (COUNT(?gen) AS ?countGen) WHERE {
            ?g wdt:P31 wd:Q11424;
                wdt:P136 ?gen.
            SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
            }
            GROUP BY ?gen ?genLabel
            ORDER BY DESC (?countGen)
            LIMIT 20`;
            makeSPARQLQuery(endpointUrl, sparqlQuery, function (data) {
                $('#dataTable').remove();
                var body = document.body,
                    tbl = document.createElement('table');
                tbl.setAttribute("id", "dataTable");
                tbl.style.border = '1px solid black';
                
                tr=tbl.insertRow();
                for ( header of data['head']['vars']) {
                    tr.insertCell().appendChild(document.createTextNode(header))
                }
                for (row of data['results']['bindings']) {
                    tr=tbl.insertRow();
                    for (const [key, value] of Object.entries(row)) {
                    tr.insertCell().appendChild(document.createTextNode(value['value']))

                    }
                }
                body.appendChild(tbl);
            }

            );
        }
        function addFilter(){
            var inputCount = document.querySelectorAll("#filtersSection > input[type='text']").length;
            $('#filtersSection').append('<label for="">Filter ' + (inputCount + 1) + ': </label><input type="text" name="'+'filter_'+(inputCount+1) +'" id="'+ 'filter_' + (inputCount + 1)+'"> <input type="button" value="Remove" onclick=removeFilter(' + '#filter_' + (inputCount + 1) +')><br><br> ')
        }
</script>
</html>